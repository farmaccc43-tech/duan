<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Tr·∫Øc nghi·ªám ƒê√† N·∫µng</title>
<style>
  body { font-family: Arial, sans-serif; background: #f3f3f3; margin: 0; padding: 20px; }
  h1 { text-align: center; color: #333; }
  .quiz-box { max-width: 700px; margin: auto; background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
  .answers { display: flex; flex-direction: column; gap: 12px; margin-top: 15px; }
  .answer-btn { padding: 12px; font-size: 17px; border-radius: 12px; border: 2px solid #ccc; background: #f5f5f5; cursor: pointer; transition: 0.25s; }
  .answer-btn:hover { background: #e8e8e8; }
  .answer-btn.correct { background: #4CAF50; color: white; border-color: #4CAF50; }
  .answer-btn.wrong { background: #e53935; color: white; border-color: #e53935; }
  #nextBtn { margin-top: 20px; width: 100%; padding: 14px; font-size: 18px; border: none; border-radius: 12px; background: #2196F3; color: white; cursor: pointer; transition: 0.25s; }
  #nextBtn:disabled { background: #90caf9; cursor: not-allowed; }
  .result-box { display: none; text-align: center; font-size: 20px; }
  .result-box span { font-size: 24px; font-weight: bold; }
  .btn{padding: 50px;}
  .btn a{ background-color: rgb(30, 42, 210); padding: 20px; border-radius: 10px;text-decoration: none; color:white}
  #startBtn { display:block; margin:20px auto; padding:12px 24px; font-size:18px; border-radius:10px; cursor:pointer; }
  #countDown { display:none; font-size:70px; text-align:center; margin-top:50px; font-weight:bold;color:#e91e63; }
</style>
</head>
<body>

<h1>Tr·∫Øc nghi·ªám ƒê√† N·∫µng</h1>
<div id="giftIntro" style="max-width:700px;margin:auto;background:#fff;padding:15px;border-radius:10px;color:#444; text-align:center; font-size:18px;">
  <h2>üéÅ Qu√† t·∫∑ng h·∫•p d·∫´n!</h2>
  <ul style="text-align:left;">
    <li>‚â• 140 ƒëi·ªÉm: <b>G·∫•u b√¥ng danh lam th·∫Øng c·∫£nh</b></li>
    <br><li>‚â• 120 ƒëi·ªÉm: <b>Gi·∫•y ch·ª©ng nh·∫≠n</b></li>
    <br><li>‚â• 100 ƒëi·ªÉm: <b>M√≥c kh√≥a danh lam th·∫Øng c·∫£nh</b></li>
    <br><li>‚â• 80 ƒëi·ªÉm: <b>Sticker ƒê√† N·∫µng</b></li>
  </ul>
</div>

<!-- V√πng quiz -->
<div class="quiz-box" id="quizBox">
  <div id="questionText" style="font-size: 22px; font-weight: bold;"></div>
  <div id="answersBox" class="answers"></div>
  <button id="nextBtn">Ti·∫øp</button>
</div>

<!-- V√πng k·∫øt qu·∫£ -->
<div class="result-box" id="resultBox">
  <p>B·∫°n tr·∫£ l·ªùi ƒë√∫ng: <span id="correctText">0</span> c√¢u</p>
  <p>B·∫°n tr·∫£ l·ªùi sai: <span id="wrongText">0</span> c√¢u</p>
</div>
<div class="btn">
  <a href="quanlibaitap.html">Quay V·ªÅ Trang Ch·ªß</a>
</div>

<audio id="bgMusic" loop>
  <source src="music.mp3" type="audio/mpeg">
</audio>

<div id="countDown"></div>

<!-- Start button: c√≥ id ƒë·ªÉ ·∫©n ƒë√∫ng n√∫t -->
<button id="startBtn" onclick="startGame()">Start</button>

<script>
// =============================
// DATA
// =============================
const questions = [
  {
    question: "VƒÉn h√≥a ChƒÉmpa ƒë·ªÉ l·∫°i d·∫•u ·∫•n l·ªõn nh·∫•t ·ªü di t√≠ch n√†o?",
    options: ["B√† N√†", "Ph·ªë c·ªï", "Th√°nh ƒë·ªãa M·ªπ S∆°n", "C√π Lao Ch√†m"],
    correct: 2
  },
  {
    question: "B·∫£o t√†ng ƒëi√™u kh·∫Øc n·ªïi ti·∫øng ·ªü ƒê√† N·∫µng l∆∞u gi·ªØ hi·ªán v·∫≠t c·ªßa n·ªÅn vƒÉn h√≥a n√†o?",
    options: ["Sa Hu·ª≥nh", "√ìc Eo", "ChƒÉmpa", "Khmer"],
    correct: 2
  },
  {
    question: "‚ÄúTh√†nh ƒêi·ªán H·∫£i‚Äù g·∫Øn v·ªõi s·ª± ki·ªán l·ªãch s·ª≠ n√†o?",
    options: ["Kh·ªüi nghƒ©a Lam S∆°n", "Kh√°ng chi·∫øn ch·ªëng Ph√°p ƒë·∫ßu th·∫ø k·ª∑ XIX", "Phong tr√†o C·∫ßn V∆∞∆°ng", "Kh·ªüi nghƒ©a T√¢y S∆°n"],
    correct: 1
  },
  {
    question: "C·∫ßu quay s√¥ng H√†n kh√°nh th√†nh nƒÉm n√†o?",
    options: ["1998", "1999", "2000", "2001"],
    correct: 2
  },
  {
    question: "C·∫ßu R·ªìng ƒë∆∞·ª£c bi·∫øt ƒë·∫øn v·ªõi kh·∫£ nƒÉng g√¨?",
    options: ["Thay ƒë·ªïi m√†u", "Quay 360 ƒë·ªô", "Phun l·ª≠a v√† n∆∞·ªõc", "Phun kh√≥i"],
    correct: 2
  },
  {
    question: "B√°n ƒë·∫£o S∆°n Tr√† c√≤n c√≥ t√™n g·ªçi kh√°c l√†:",
    options: ["N√∫i Ch√∫a", "N√∫i Kh·ªâ", "N√∫i B√† N√†", "N√∫i Ng·ª±"],
    correct: 1
  },
  {
    question: "C√¥ng tr√¨nh do ng∆∞·ªùi Ph√°p x√¢y d·ª±ng t·∫°i S∆°n Tr√† l√†:",
    options: ["H·∫£i ƒêƒÉng S∆°n Tr√†", "B·∫£o t√†ng Sa Hu·ª≥nh", "Nh√† h√°t Tr∆∞ng V∆∞∆°ng", "C·∫ßu Ti√™n S∆°n"],
    correct: 0
  },
  {
    question: "L√†ng ngh·ªÅ Nam √î n·ªïi ti·∫øng v·ªõi:",
    options: ["Chi·∫øu c√≥i", "N∆∞·ªõc m·∫Øm", "L·ª•a", "ƒê·ªì g·ªó"],
    correct: 1
  },
  {
    question: "Nh√† th·ªù n·ªïi ti·∫øng l√¢u ƒë·ªùi ·ªü ƒê√† N·∫µng c√≥ bi·ªÉu t∆∞·ª£ng con g√† tr√™n n√≥c:",
    options: ["Ch√≠nh t√≤a ƒê√† N·∫µng", "M√¢n Th√°i", "H√≤a C∆∞·ªùng", "An Ng√£i"],
    correct: 0
  },
  {
    question: "ƒê√† N·∫µng ƒë∆∞·ª£c m·ªánh danh l√†:",
    options: ["Th√†nh ph·ªë c·ªßa bi·ªÉn", "Th√†nh ph·ªë ƒë√°ng s·ªëng", "Th√†nh ph·ªë ng√†n hoa", "Th√†nh ph·ªë xanh"],
    correct: 1
  },
  {
    question: "Khu di t√≠ch Ng≈© H√†nh S∆°n c√≥ bao nhi√™u ng·ªçn n√∫i?",
    options: ["3", "4", "5", "6"],
    correct: 2
  },
  {
    question: "L√†ng ƒë√° m·ªπ ngh·ªá d∆∞·ªõi ch√¢n Ng≈© H√†nh S∆°n t√™n g√¨?",
    options: ["Non N∆∞·ªõc", "Th·∫°ch Th·∫•t", "Ph√∫ M·ªπ", "T√¢n Ch√¢u"],
    correct: 0
  },
  {
    question: "Ch·ª£ truy·ªÅn th·ªëng l√¢u ƒë·ªùi c·ªßa ƒê√† N·∫µng:",
    options: ["Ch·ª£ H√†n", "Ch·ª£ C·ªìn", "Ch·ª£ B·∫Øc M·ªπ An", "Ch·ª£ ƒê√™m S∆°n Tr√†"],
    correct: 0
  },
  {
    question: "B·∫£o t√†ng ƒê√† N·∫µng n·∫±m ·ªü con ƒë∆∞·ªùng n√†o?",
    options: ["Tr·∫ßn Ph√∫", "B·∫°ch ƒê·∫±ng", "L√™ Du·∫©n", "2 Th√°ng 9"],
    correct: 0
  },
  {
    question: "C·ªïng tr·ªùi ·ªü B√† N√† Hills thu·ªôc ki·∫øn tr√∫c m√¥ ph·ªèng c·ªßa:",
    options: ["Hi L·∫°p", "Ph√°p", "√ù", "Anh"],
    correct: 1
  },
];

// =============================
// ELEMENTS & STATE
// =============================
let currentIndex = 0;
let correctCount = 0;
let wrongCount = 0;

const questionText = document.getElementById("questionText");
const answersBox = document.getElementById("answersBox");
const nextBtn = document.getElementById("nextBtn");
const resultBox = document.getElementById("resultBox");
const quizBox = document.getElementById("quizBox");
const correctText = document.getElementById("correctText");
const wrongText = document.getElementById("wrongText");
const startBtn = document.getElementById("startBtn");
const cdEl = document.getElementById("countDown");
const giftIntro = document.getElementById("giftIntro");

// ·∫©n quiz ban ƒë·∫ßu
quizBox.style.display = "none";

// =============================
// START GAME / COUNTDOWN
// =============================
function startGame() {
  // ·∫©n ch·ªâ ƒë√∫ng n√∫t Start + ·∫©n ph·∫ßn qu√† gi·ªõi thi·ªáu
  startBtn.style.display = "none";
  giftIntro.style.display = "none";

  // th·ª≠ b·∫≠t nh·∫°c n·∫øu ng∆∞·ªùi d√πng ƒë√£ t∆∞∆°ng t√°c (tr√¨nh duy·ªát ch·∫∑n autoplay n·∫øu kh√¥ng c√≥ t∆∞∆°ng t√°c)
  const music = document.getElementById("bgMusic");
  music.play().catch(()=>{ /* n·∫øu b·ªã ch·∫∑n, kh√¥ng quan tr·ªçng */ });

  startCountDown();
}

function startCountDown() {
  cdEl.style.display = "block";
  let time = 3;
  cdEl.textContent = time;

  const timer = setInterval(() => {
    time--;
    cdEl.textContent = time > 0 ? time : "GO!";
    if (time < 0) {
      clearInterval(timer);
      cdEl.style.display = "none";
      // Hi·ªán quiz v√† load c√¢u h·ªèi ƒë·∫ßu ti√™n
      quizBox.style.display = "block";
      currentIndex = 0;
      correctCount = 0;
      wrongCount = 0;
      loadQuestion();
    }
  }, 1000);
}

// =============================
// HI·ªÇN TH·ªä C√ÇU H·ªéI
// =============================
function loadQuestion() {
  const q = questions[currentIndex];
  questionText.textContent = `C√¢u ${currentIndex + 1}: ${q.question}`;

  answersBox.innerHTML = "";
  q.options.forEach((opt, i) => {
    const btn = document.createElement("button");
    btn.className = "answer-btn";
    btn.textContent = opt;
    btn.onclick = () => selectAnswer(i);
    answersBox.appendChild(btn);
  });

  nextBtn.disabled = true;
  nextBtn.textContent = currentIndex === questions.length - 1 ? "N·ªôp b√†i" : "C√¢u ti·∫øp";
}

// =============================
// CH·ªåN ƒê√ÅP √ÅN
// =============================
function selectAnswer(choice) {
  const q = questions[currentIndex];

  if (choice === q.correct) correctCount++;
  else wrongCount++;

  const allBtns = document.querySelectorAll(".answer-btn");
  allBtns.forEach((b) => (b.disabled = true));

  // mark ƒë√∫ng/sai (an to√†n ki·ªÉm tra ch·ªâ khi t·ªìn t·∫°i index)
  if (allBtns[q.correct]) allBtns[q.correct].classList.add("correct");
  if (choice !== q.correct && allBtns[choice]) allBtns[choice].classList.add("wrong");

  nextBtn.disabled = false;
}

// =============================
// N√öT TI·∫æP / N·ªòP B√ÄI
// =============================
nextBtn.onclick = () => {
  if (currentIndex < questions.length - 1) {
    currentIndex++;
    loadQuestion();
  } else {
    showResult();
  }
};

// =============================
// HI·ªÇN TH·ªä K·∫æT QU·∫¢
// =============================
function showResult() {
  quizBox.style.display = "none";
  resultBox.style.display = "block";
  correctText.textContent = correctCount;
  wrongText.textContent = wrongCount;

  const totalPoints = correctCount * 10;
  let gift = "";
    localStorage.setItem("done_ex1", true);


  if (totalPoints >= 140) gift = "üéÅ Qu√† VIP: G·∫•u b√¥ng danh lam th·∫Øng c·∫£nh ";
  else if (totalPoints >= 120) gift = "üéÅ Qu√† l·ªõn: Gi·∫•y ch·ª©ng nh·∫≠n";
  else if (totalPoints >= 100) gift = "üéÅ Qu√† trung b√¨nh: M√≥c kh√≥a danh lam th·∫Øng c·∫£nh";
  else if (totalPoints >= 80) gift = "üéÅ Qu√† nh·ªè: Sticker ƒê√† N·∫µng";
  else gift = "üò¢ Kh√¥ng ƒë·ªß ƒëi·ªÉm ƒë·ªïi qu√†. Ch√∫c may m·∫Øn b√†i sau!";

  // Ghi ƒë√® n·ªôi dung (kh√¥ng c·ªông d·ªìn)
  resultBox.innerHTML = `
    <p>B·∫°n tr·∫£ l·ªùi ƒë√∫ng: <span id="correctText">${correctCount}</span> c√¢u</p>
    <p>B·∫°n tr·∫£ l·ªùi sai: <span id="wrongText">${wrongCount}</span> c√¢u</p>
    <p>T·ªïng ƒëi·ªÉm c·ªßa b·∫°n: <span style="font-size:28px; color:#e91e63">${totalPoints}</span></p>
    <p>${gift}</p>
    <div style="margin-top:16px;">
  `;
  
}

</script>
</body>
</html>
