<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Tr·∫Øc nghi·ªám ƒê√† N·∫µng</title>
<style>
  body { font-family: Arial, sans-serif; background: #f3f3f3; margin: 0; padding: 20px; }
  h1 { text-align: center; color: #333; }
  .quiz-box { max-width: 700px; margin: auto; background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
  .answers { display: flex; flex-direction: column; gap: 12px; margin-top: 15px; }
  .answer-btn { padding: 12px; font-size: 17px; border-radius: 12px; border: 2px solid #ccc; background: #f5f5f5; cursor: pointer; transition: 0.25s; }
  .answer-btn:hover { background: #e8e8e8; }
  .answer-btn.correct { background: #4CAF50; color: white; border-color: #4CAF50; }
  .answer-btn.wrong { background: #e53935; color: white; border-color: #e53935; }
  #nextBtn { margin-top: 20px; width: 100%; padding: 14px; font-size: 18px; border: none; border-radius: 12px; background: #2196F3; color: white; cursor: pointer; transition: 0.25s; }
  #nextBtn:disabled { background: #90caf9; cursor: not-allowed; }
  .result-box { display: none; text-align: center; font-size: 20px; }
  .result-box span { font-size: 24px; font-weight: bold; }
  .btn{padding: 50px;}
  .btn a{ background-color: rgb(30, 42, 210); padding: 20px; border-radius: 10px;text-decoration: none; color:white}
  #startBtn { display:block; margin:20px auto; padding:12px 24px; font-size:18px; border-radius:10px; cursor:pointer; }
  #countDown { display:none; font-size:70px; text-align:center; margin-top:50px; font-weight:bold;color:#e91e63; }
</style>
</head>
<body>

<h1>Tr·∫Øc nghi·ªám ƒê√† N·∫µng</h1>
<div id="giftIntro" style="max-width:700px;margin:auto;background:#fff;padding:15px;border-radius:10px;color:#444; text-align:center; font-size:18px;">
  <h2>üéÅ Qu√† t·∫∑ng h·∫•p d·∫´n!</h2>
  <ul style="text-align:left;">
    <li>‚â• 150 ƒëi·ªÉm: <b>V√© B√† N√† Hills</b></li>
    <br><li>‚â• 130 ƒëi·ªÉm: <b>V√© xem C·∫ßu R·ªìng phun l·ª≠a + n∆∞·ªõc</b></li>
    <br><li>‚â• 110 ƒëi·ªÉm: <b>M√≥c kh√≥a C·∫ßu R·ªìng</b></li>
    <br><li>‚â• 90 ƒëi·ªÉm: <b>Sticker ƒê√† N·∫µng</b></li>
  </ul>
</div>

<!-- V√πng quiz -->
<div class="quiz-box" id="quizBox">
  <div id="questionText" style="font-size: 22px; font-weight: bold;"></div>
  <div id="answersBox" class="answers"></div>
  <button id="nextBtn">Ti·∫øp</button>
</div>

<!-- V√πng k·∫øt qu·∫£ -->
<div class="result-box" id="resultBox">
  <p>B·∫°n tr·∫£ l·ªùi ƒë√∫ng: <span id="correctText">0</span> c√¢u</p>
  <p>B·∫°n tr·∫£ l·ªùi sai: <span id="wrongText">0</span> c√¢u</p>
</div>
<div class="btn">
  <a href="quanlibaitap.html">Quay V·ªÅ Trang Ch·ªß</a>
</div>

<audio id="bgMusic" loop>
  <source src="music.mp3" type="audio/mpeg">
</audio>

<div id="countDown"></div>

<!-- Start button: c√≥ id ƒë·ªÉ ·∫©n ƒë√∫ng n√∫t -->
<button id="startBtn" onclick="startGame()">Start</button>

<script>
// =============================
// DATA
// =============================
const questions = [
  // --- T√≠n ng∆∞·ª°ng ‚Äì l·ªÖ h·ªôi ---
  {
    question: "L·ªÖ h·ªôi c·∫ßu ng∆∞ ·ªü ƒê√† N·∫µng t·ªï ch·ª©c nh·∫±m:",
    options: ["C·∫ßu an cho gia ƒë√¨nh", "C·∫ßu m∆∞a thu·∫≠n gi√≥ h√≤a cho n√¥ng d√¢n", "C·∫ßu b√¨nh an, t√¥m c√° ƒë·∫ßy khoang cho ng∆∞ d√¢n", "C·∫ßu m√πa m√†ng b·ªôi thu"],
    correct: 2
  },
  {
    question: "L·ªÖ h·ªôi l·ªõn t·∫°i Ng≈© H√†nh S∆°n di·ªÖn ra v√†o th√°ng Gi√™ng l√†:",
    options: ["L·ªÖ h·ªôi Quan Th·∫ø √Çm", "L·ªÖ h·ªôi C√° √îng", "L·ªÖ h·ªôi Hoa ƒëƒÉng", "L·ªÖ h·ªôi ƒëua thuy·ªÅn"],
    correct: 0
  },
  {
    question: "Nghinh √îng l√† t√≠n ng∆∞·ª°ng ph·ªï bi·∫øn ·ªü c·ªông ƒë·ªìng:",
    options: ["Ng∆∞·ªùi mi·ªÅn n√∫i", "Ng∆∞ d√¢n ven bi·ªÉn", "Ng∆∞·ªùi Khmer", "Ng∆∞·ªùi Hoa"],
    correct: 1
  },
  {
    question: "L·ªÖ h·ªôi b·∫Øn ph√°o hoa qu·ªëc t·∫ø ƒê√† N·∫µng vi·∫øt t·∫Øt l√†:",
    options: ["DIFF", "DAFF", "DFF", "DFC"],
    correct: 0
  },
  {
    question: "Di t√≠ch t√≠n ng∆∞·ª°ng tr√™n b√°n ƒë·∫£o S∆°n Tr√† ƒë∆∞·ª£c nhi·ªÅu ng∆∞·ªùi ƒë·∫øn vi·∫øng:",
    options: ["ƒê·ªÅn H√πng", "Ch√πa Linh ·ª®ng", "Ch√πa T·ª´ ƒê√†m", "Mi·∫øu B√†"],
    correct: 1
  },
  {
    question: "T∆∞·ª£ng Ph·∫≠t ƒë·ª©ng t·∫°i Linh ·ª®ng S∆°n Tr√† cao kho·∫£ng:",
    options: ["47m", "57m", "67m", "77m"],
    correct: 2
  },
  {
    question: "L·ªÖ h·ªôi truy·ªÅn th·ªëng ·ªü l√†ng T√∫y Loan:",
    options: ["L·ªÖ h·ªôi c√∫ng r·ª´ng", "L·ªÖ h·ªôi ƒë√¨nh l√†ng T√∫y Loan", "L·ªÖ h·ªôi r∆∞·ªõc s·∫Øc phong", "L·ªÖ h·ªôi tr√¢u r∆°m"],
    correct: 1
  },
  {
    question: "Ho·∫°t ƒë·ªông th∆∞·ªùng c√≥ trong l·ªÖ h·ªôi c·∫ßu ng∆∞:",
    options: ["ƒêua thuy·ªÅn", "R∆∞·ªõc s·∫Øc phong", "H√°t B√†i Ch√≤i", "M√∫a l√¢n"],
    correct: 0
  },
  {
    question: "T√≠n ng∆∞·ª°ng th·ªù C√° √îng c·ªßa ƒê√† N·∫µng g·∫Øn v·ªõi h√¨nh ·∫£nh:",
    options: ["C√° voi", "C√° heo", "C√° m·∫≠p", "C√° ng·ª´"],
    correct: 0
  },
  {
    question: "L·ªÖ h·ªôi Quan Th·∫ø √Çm di·ªÖn ra t·∫°i ng·ªçn n√∫i n√†o?",
    options: ["Th·ªßy S∆°n", "Th·ªï S∆°n", "Kim S∆°n", "M·ªôc S∆°n"],
    correct: 2
  },
  {
    question: "Nghi th·ª©c r∆∞·ªõc s·∫Øc phong th·∫ßn ·ªü ƒê√† N·∫µng xu·∫•t ph√°t t·ª´ truy·ªÅn th·ªëng:",
    options: ["Ng∆∞·ªùi Vi·ªát c·ªï", "Tri·ªÅu ƒë√¨nh phong ki·∫øn", "Ng∆∞·ªùi ChƒÉm", "Ng∆∞·ªùi Hoa"],
    correct: 1
  },
  {
    question: "L·ªÖ h·ªôi ƒëua thuy·ªÅn th∆∞·ªùng t·ªï ch·ª©c v√†o d·ªãp n√†o?",
    options: ["M·ªìng 1 T·∫øt", "M·ªìng 2 & 3 T·∫øt", "30 T·∫øt", "R·∫±m th√°ng 7"],
    correct: 1
  },
  {
    question: "K√®n ng∆∞ √¢m trong l·ªÖ h·ªôi c·∫ßu ng∆∞ d√πng ƒë·ªÉ:",
    options: ["G·ªçi c√° v·ªÅ", "H√≤a t·∫•u trong t·∫ø l·ªÖ", "ƒêi·ªÅu khi·ªÉn ghe", "D·∫´n ƒëo√†n r∆∞·ªõc"],
    correct: 1
  },
  {
    question: "L·ªÖ h·ªôi t·∫°i ƒë√¨nh Nam √î ƒë∆∞·ª£c t·ªï ch·ª©c ƒë·ªÉ t∆∞·ªüng nh·ªõ:",
    options: ["ƒê·ª©c Th√°nh Tr·∫ßn", "C√°c v·ªã ti·ªÅn hi·ªÅn", "T·ªï ngh·ªÅ ƒë√°", "Nh√† Tr·∫ßn"],
    correct: 1
  },
  {
    question: "L·ªÖ h·ªôi ƒë·∫∑c s·∫Øc thu h√∫t kh√°ch qu·ªëc t·∫ø nh·∫•t t·∫°i ƒê√† N·∫µng l√†:",
    options: ["L·ªÖ h·ªôi Quan Th·∫ø √Çm", "L·ªÖ h·ªôi C·∫ßu Ng∆∞", "DIFF ‚Äì Ph√°o hoa qu·ªëc t·∫ø", "L·ªÖ h·ªôi B√† Thu B·ªìn"],
    correct: 2
  },
];

// =============================
// ELEMENTS & STATE
// =============================
let currentIndex = 0;
let correctCount = 0;
let wrongCount = 0;

const questionText = document.getElementById("questionText");
const answersBox = document.getElementById("answersBox");
const nextBtn = document.getElementById("nextBtn");
const resultBox = document.getElementById("resultBox");
const quizBox = document.getElementById("quizBox");
const correctText = document.getElementById("correctText");
const wrongText = document.getElementById("wrongText");
const startBtn = document.getElementById("startBtn");
const cdEl = document.getElementById("countDown");
const giftIntro = document.getElementById("giftIntro");

// ·∫©n quiz ban ƒë·∫ßu
quizBox.style.display = "none";

// =============================
// START GAME / COUNTDOWN
// =============================
function startGame() {
  // ·∫©n ch·ªâ ƒë√∫ng n√∫t Start + ·∫©n ph·∫ßn qu√† gi·ªõi thi·ªáu
  startBtn.style.display = "none";
  giftIntro.style.display = "none";

  // th·ª≠ b·∫≠t nh·∫°c n·∫øu ng∆∞·ªùi d√πng ƒë√£ t∆∞∆°ng t√°c (tr√¨nh duy·ªát ch·∫∑n autoplay n·∫øu kh√¥ng c√≥ t∆∞∆°ng t√°c)
  const music = document.getElementById("bgMusic");
  music.play().catch(()=>{ /* n·∫øu b·ªã ch·∫∑n, kh√¥ng quan tr·ªçng */ });

  startCountDown();
}

function startCountDown() {
  cdEl.style.display = "block";
  let time = 3;
  cdEl.textContent = time;

  const timer = setInterval(() => {
    time--;
    cdEl.textContent = time > 0 ? time : "GO!";
    if (time < 0) {
      clearInterval(timer);
      cdEl.style.display = "none";
      // Hi·ªán quiz v√† load c√¢u h·ªèi ƒë·∫ßu ti√™n
      quizBox.style.display = "block";
      currentIndex = 0;
      correctCount = 0;
      wrongCount = 0;
      loadQuestion();
    }
  }, 1000);
}

// =============================
// HI·ªÇN TH·ªä C√ÇU H·ªéI
// =============================
function loadQuestion() {
  const q = questions[currentIndex];
  questionText.textContent = `C√¢u ${currentIndex + 1}: ${q.question}`;

  answersBox.innerHTML = "";
  q.options.forEach((opt, i) => {
    const btn = document.createElement("button");
    btn.className = "answer-btn";
    btn.textContent = opt;
    btn.onclick = () => selectAnswer(i);
    answersBox.appendChild(btn);
  });

  nextBtn.disabled = true;
  nextBtn.textContent = currentIndex === questions.length - 1 ? "N·ªôp b√†i" : "C√¢u ti·∫øp";
}

// =============================
// CH·ªåN ƒê√ÅP √ÅN
// =============================
function selectAnswer(choice) {
  const q = questions[currentIndex];

  if (choice === q.correct) correctCount++;
  else wrongCount++;

  const allBtns = document.querySelectorAll(".answer-btn");
  allBtns.forEach((b) => (b.disabled = true));

  // mark ƒë√∫ng/sai (an to√†n ki·ªÉm tra ch·ªâ khi t·ªìn t·∫°i index)
  if (allBtns[q.correct]) allBtns[q.correct].classList.add("correct");
  if (choice !== q.correct && allBtns[choice]) allBtns[choice].classList.add("wrong");

  nextBtn.disabled = false;
}

// =============================
// N√öT TI·∫æP / N·ªòP B√ÄI
// =============================
nextBtn.onclick = () => {
  if (currentIndex < questions.length - 1) {
    currentIndex++;
    loadQuestion();
  } else {
    showResult();
  }
};

// =============================
// HI·ªÇN TH·ªä K·∫æT QU·∫¢
// =============================
function showResult() {
  quizBox.style.display = "none";
  resultBox.style.display = "block";
  correctText.textContent = correctCount;
  wrongText.textContent = wrongCount;

  const totalPoints = correctCount * 10;
  let gift = "";
  localStorage.setItem("done_ex2", true);

  if (totalPoints >= 150) gift = "üéÅ Qu√† VIP: V√© tham quan B√† N√† Hills";
  else if (totalPoints >= 130) gift = "üéÅ Qu√† l·ªõn: V√© xem C·∫ßu R·ªìng phun l·ª≠a + n∆∞·ªõc u·ªëng";
  else if (totalPoints >= 110) gift = "üéÅ Qu√† trung b√¨nh: M√≥c kh√≥a C·∫ßu R·ªìng";
  else if (totalPoints >= 90) gift = "üéÅ Qu√† nh·ªè: Sticker ƒê√† N·∫µng";
  else gift = "üò¢ Kh√¥ng ƒë·ªß ƒëi·ªÉm ƒë·ªïi qu√†. Ch√∫c may m·∫Øn b√†i sau!";

  // Ghi ƒë√® n·ªôi dung (kh√¥ng c·ªông d·ªìn)
  resultBox.innerHTML = `
    <p>B·∫°n tr·∫£ l·ªùi ƒë√∫ng: <span id="correctText">${correctCount}</span> c√¢u</p>
    <p>B·∫°n tr·∫£ l·ªùi sai: <span id="wrongText">${wrongCount}</span> c√¢u</p>
    <p>T·ªïng ƒëi·ªÉm c·ªßa b·∫°n: <span style="font-size:28px; color:#e91e63">${totalPoints}</span></p>
    <p>${gift}</p>
    <div style="margin-top:16px;">
  `;
}
</script>
</body>
</html>
